
$(document).ready(function(){
  $('#note').keyup(debounce(function(){
    localStorage.setItem("note", $(this).val());
    console.log('dbounce test..');
    $("#flash").removeClass('hidden');
  },500));

  if(localStorage.getItem("note") && localStorage.getItem("note")!=''){
    var noteItem = localStorage.getItem("note")
    $('#note').val(noteItem);
  }
});

setInterval(function() {
      $("#flash").addClass('hidden');
      //alert('test');
  }, 5000);

function debounce(func, wait, immediate) {
	var timeout;
	return function() {
		var context = this, args = arguments;
		var later = function() {
			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};
};

//Registering service worker
if ('serviceWorker' in navigator){
	navigator.serviceWorker.register('sw.js').then(function (registration){
		//Registration was successfull
		console.log('ServiceWorker registration successfull with scope : ', registration.scope);
	}).catch(function(err){
		//registration failed
		console.log('serviceWorker registration failed : ', err);
	});
}